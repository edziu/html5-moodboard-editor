(function(a){a.touchSlider=function(e,j){var c={range:{start:0,end:100},width:120,value:0,markup:a("<div class='touchslider'><div class='touchslider_track'><a href='#'><span></span></a></div></div>"),onStart:function(){},onAfter:function(){}};var g=this;g.settings={};var i=a(e),e=e;g.init=function(){g.settings=a.extend({},c,j);i.hide().before(g.settings.markup);g.settings.markup.width(g.settings.width);i.change(function(){var m=a(this).val(),l=Math.abs(g.settings.range.end-g.settings.range.start),k=(m/l)*g.settings.width;a("a",g.settings.markup).css("left",k)});a("a",g.settings.markup).each(function(){this.addEventListener("touchstart",d,false)});a("a",g.settings.markup).each(function(){this.addEventListener("touchmove",f,false)});a("a",g.settings.markup).each(function(){this.addEventListener("touchend",b,false)});a("a",g.settings.markup).mousedown(function(k){a(this).data("mousedown",true);h=k.pageX-parseInt(a(this).css("left"),10)});a("a",g.settings.markup).mousemove(function(n){if(a(this).data("mousedown")==true&&h){var o=n.pageX-h;if(o<0){position=0}else{if(o>g.settings.markup.width()){position=g.settings.markup.width()}else{position=o}}a(this).css("left",position);var l=position/g.settings.width,k=Math.abs(g.settings.range.end-g.settings.range.start),m=(l*k)+g.settings.range.start;i.val(m).change()}});a(document).mouseup(function(k){a(this).data("mousedown",false);h=false});a("a",g.settings.markup).css({left:(g.settings.value/Math.abs(g.settings.range.end-g.settings.range.start))*g.settings.width});i.val(g.settings.value)};var h=false;var d=function(k){g.settings.onStart();var l=k.changedTouches[0];h=l.pageX-parseInt(a(this).css("left"),10)};var f=function(n){n.preventDefault();var p=n.changedTouches[0];if(h){var o=p.pageX-h;if(o<0){position=0}else{if(o>g.settings.markup.width()){position=g.settings.markup.width()}else{position=o}}a(this).css("left",position);var l=position/g.settings.markup.width(),k=Math.abs(g.settings.range.end-g.settings.range.start),m=(l*k)+g.settings.range.start;i.val(m).change()}};var b=function(k){g.settings.onAfter()};g.init()};a.fn.touchSlider=function(b){return this.each(function(){if(undefined==a(this).data("touchSlider")){var c=new a.touchSlider(this,b);a(this).data("touchSlider",c)}})}})(jQuery);